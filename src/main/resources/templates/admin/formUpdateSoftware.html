<!DOCTYPE html>
<html>  
	<head>
		<link rel="icon" href="/image/favicon.ico" type="image/x-icon">
	<title th:if="${software.id==null}">Nuovo software</title>
	<title th:if="${software.id!=null}">Modifica software</title>
	<script src="/js/3.7.1_jquery.min.js"></script>
	<script src="/js/admin/formUpdateSoftware.js"></script>
	<link rel="stylesheet" href="/css/admin/formUpdateSoftware.css?version=3" />
	
	<script src="/js/_form.js"></script>
	<link rel="stylesheet" href="/css/_form.css?version=3" />
	
	<link rel="stylesheet" href="/css/_menu.css" />
  </head>
  <body>
	<section id="Home">
			<nav>
				<div class="logo">
					<a href="/">
						<img src="/image/logo.png">
					</a>
				</div>
				<ul>
					<li th:if="${admin!=true}">
						<a href="/softwareHouses">Software house</a>
					</li>
					<li th:if="${admin==true}">
						<a href="/admin/manageSoftware">Gestisci i software</a>
						<ul class="dropdown">
							<li><a href="/admin/formNewSoftware">Crea software</a></li>
						</ul>
					</li>
					<li th:if="${admin==true}">
						<a href="/admin/manageSviluppatori">Gestisci i sviluppatori</a>
						<ul class="dropdown">
							<li><a href="/admin/formNewSviluppatore">Crea sviluppatore</a></li>
						</ul>
					</li>
					<li th:if="${admin==true}">
						<a href="/admin/manageSoftwareHouses">Gestisci le software house</a>
						<ul class="dropdown">
							<li><a href="/admin/formNewSoftwareHouse">Crea software house</a></li>
						</ul>
					</li>
				</ul>
		
				<div>
					<a th:if="${utenteAuth!=null}" th:href="@{'/sviluppatore/' + ${sviluppatoreAuth.id}}" id="account">
						<img th:src="@{${sviluppatoreAuth.utente.foto.getImagePath}}" id="utente-corrente-immagine">
					</a>
					<a th:if="${utenteAuth!=null}" href="/logout" id="esci">Esci</a>
					<a th:unless="${utenteAuth!=null}" href="/login" id="accedi">Accedi</a>
					<a th:unless="${utenteAuth!=null}" href="/register" id="registrati">Registrati</a>
				</div>
		
			</nav>
		</section>
	<h1 th:if="${software.id==null}">Crea un nuovo software</h1>
	<h1 th:unless="${software.id==null}">Modifica un software</h1>
    <form th:action="${software.id!=null} ? '/admin/updateSoftware/' + ${software.id} : '/admin/software'" method="POST" th:object="${software}" enctype="multipart/form-data">
		<div class="input-div">
		    <label class="input-label">Nome</label>
		    <input required th:field="${software.nome}" name='nome' type="text" class="input" onfocus="setFocus(true)" onblur="setFocus(false)">
		</div>
		<div>
			Software house
			<label class="select" for="softwareHouseId">
				<select required th:field="${software.softwareHouse}" id="slct" name="softwareHouseId">
					<option th:each="unSoftHouse : ${softwareHouse}" th:value="${unSoftHouse.id}" th:text="${unSoftHouse.nome}">
					</option>
				</select>
				<svg>
					<use xlink:href="#select-arrow-down"></use>
				</svg>
			</label>
		</div>
	  <div class="input-div">
	    <label class="input-label">Categoria</label>
	    <input required th:field="${software.categoria}" name='categoria' type="text" class="input" onfocus="setFocus(true)" onblur="setFocus(false)">
	</div>
	  <input required type="date" class="data-input" th:value="${software.id!=null} ? ${software.annoPubblicazione} : ''" th:field="${software.annoPubblicazione}"/>
	<div th:if="${(software.immagini==null || software.immagini.isEmpty()) && software.id!=null}">Non ci sono immagini per il software corrente</div>
	<ul class="immagini">
		<li th:each="immagine : ${software.immagini}">
			<div class="contenitore-immagine">
				<img th:src="@{${immagine.getImagePath}}" class="immagine">
				<div class="contenitore">
					<a th:href="@{/admin/removeImageSoftware/}+${software.id}+'/'+${immagine.id}" class="bottone-icona">
						<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
							class="icon cancella">
							<path
								d="M9 9L15 15M15 9L9 15M7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21Z"
								stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
					</a>
				</div>
			</div>
		</li>
	</ul>
	<div id="immagini">
		<div id="image0" class="carica-immagine">
			<input type="file" name='fileImage' id="fileImage0" accept="image/png, image/jpeg" class="fileImage" />
			<label for="fileImage0" class="bottone"><svg class="icona-upload" xmlns="http://www.w3.org/2000/svg" width="16"
					height="16" fill="currentColor" viewBox="0 0 16 16">
					<path
						d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M6.354 9.854a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 8.707V12.5a.5.5 0 0 1-1 0V8.707z" />
				</svg> Carica file</label>
			<img id="thumbnail0" />
			<div class="contenitore">
				<a class="bottone-icona nascosto fileImageRemove" id="fileImageRemove0">
					<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
						class="icon cancella">
						<path
							d="M9 9L15 15M15 9L9 15M7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21Z"
							stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
				</a>
			</div>
		</div>
	</div>

        <span><button type="submit" class="bottone">Conferma</button></span>
      </div>
   </form>
   
   <!-- Sprite SVG-->
      	<svg class="sprites"><symbol id="select-arrow-down" viewbox="0 0 10 6"><polyline points="1 1 5 5 9 1"></polyline></symbol></svg>
  </body>
</html>
